
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Introduction to Software Testing &#8212; The Fuzzing Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=42e1b1a5" />
    <link rel="stylesheet" type="text/css" href="_static/mastodon-timeline.css?v=f82c2b23" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Intro_Testing';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fuzzing: Breaking Things with Random Inputs" href="Fuzzer.html" />
    <link rel="prev" title="Sitemap" href="Tours.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content"><p>This is a beta version of fuzzingbook.org, currently in development. See the <a href="https://fuzzingbook.org/classic/"  style="color:white!important;">classic site</a> for the 2024 version.</p></div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/fuzzingbook.png" class="logo__image only-light" alt="The Fuzzing Book - Home"/>
    <script>document.write(`<img src="_static/fuzzingbook.png" class="logo__image only-dark" alt="The Fuzzing Book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    The Fuzzing Book
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Tours.html">Sitemap</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Introduction to Software Testing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Lexical Fuzzing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Fuzzer.html">Fuzzing: Breaking Things with Random Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="Coverage.html">Code Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="MutationFuzzer.html">Mutation-Based Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="GreyboxFuzzer.html">Greybox Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="SearchBasedFuzzer.html">Search-Based Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="MutationAnalysis.html">Mutation Analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Syntactical Fuzzing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Grammars.html">Fuzzing with Grammars</a></li>
<li class="toctree-l1"><a class="reference internal" href="GrammarFuzzer.html">Efficient Grammar Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="GrammarCoverageFuzzer.html">Grammar Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parser.html">Parsing Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ProbabilisticGrammarFuzzer.html">Probabilistic Grammar Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="GeneratorGrammarFuzzer.html">Fuzzing with Generators</a></li>

<li class="toctree-l1"><a class="reference internal" href="GreyboxGrammarFuzzer.html">Greybox Fuzzing with Grammars</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reducer.html">Reducing Failure-Inducing Inputs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Semantical Fuzzing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="FuzzingWithConstraints.html">Fuzzing with Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="GrammarMiner.html">Mining Input Grammars</a></li>
<li class="toctree-l1"><a class="reference internal" href="InformationFlow.html">Tracking Information Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConcolicFuzzer.html">Concolic Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="SymbolicFuzzer.html">Symbolic Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicInvariants.html">Mining Function Specifications</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Domain-Specific Fuzzing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ConfigurationFuzzer.html">Testing Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="APIFuzzer.html">Fuzzing APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="Carver.html">Carving Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="PythonFuzzer.html">Testing Compilers</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebFuzzer.html">Testing Web Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="GUIFuzzer.html">Testing Graphical User Interfaces</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Managing Fuzzing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="FuzzingInTheLarge.html">Fuzzing in the Large</a></li>
<li class="toctree-l1"><a class="reference internal" href="WhenToStopFuzzing.html">When To Stop Fuzzing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essays</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="AcademicPrototyping.html">Academic Prototyping</a></li>
<li class="toctree-l1"><a class="reference internal" href="PrototypingWithPython.html">Prototyping with Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ExpectError.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="Timer.html">Timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Timeout.html">Timeout</a></li>
<li class="toctree-l1"><a class="reference internal" href="ClassDiagram.html">Class Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="RailroadDiagrams.html">Railroad Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="ControlFlow.html">Control Flow Graph</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About This Book</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ReleaseNotes.html">Fuzzingbook Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Importing.html">Downloads and Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="Guide_for_Authors.html">Guide for Authors</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/uds-se/fuzzingbook/master?urlpath=tree/docs/notebooks/Intro_Testing.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/uds-se/fuzzingbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/uds-se/fuzzingbook/issues/new?title=Issue%20on%20page%20%2FIntro_Testing.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
    <li><a href="../code/Intro_Testing.py" target="_blank"
       class="btn btn-sm btn-download-source-button dropdown-item"
       title="Download Python code"
       data-bs-placement="left" data-bs-toggle="tooltip"
    >
  

    <span class="btn__icon-container">
      <i class="fas fa-file"></i>
      </span>
    <span class="btn__text-container">.py</span>
    </a>
    </li>
    
      
      
      
      <li><a href="_sources/Intro_Testing.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download notebook"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  
    <li><a href="Importing.html" target="_blank"
       class="btn btn-sm btn-download-source-button dropdown-item"
       title="All downloads"
       data-bs-placement="left" data-bs-toggle="tooltip"
    >
  

    <span class="btn__icon-container">
      <i class="fas fa-file"></i>
      </span>
    <span class="btn__text-container">All downloads</span>
    </a>
    </li>
    </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Introduction to Software Testing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-testing">Simple Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-python-programs">Understanding Python Programs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-function">Running a Function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-notebooks">Interacting with Notebooks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-a-function">Debugging a Function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checking-a-function">Checking a Function</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#automating-test-execution">Automating Test Execution</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-tests">Generating Tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-time-verification">Run-Time Verification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-input-vs-function-input">System Input vs Function Input</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-limits-of-testing">The Limits of Testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lessons-learned">Lessons Learned</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next Steps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#background">Background</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-get-acquainted-with-notebooks-and-python">Exercise 1: Get Acquainted with Notebooks and Python</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#beginner-level-run-notebooks-in-your-browser">Beginner Level: Run Notebooks in Your Browser</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-level-run-python-code-on-your-machine">Advanced Level: Run Python Code on Your Machine</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pro-level-run-notebooks-on-your-machine">Pro Level: Run Notebooks on Your Machine</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#boss-level-contribute">Boss Level: Contribute!</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-testing-shellsort">Exercise 2: Testing Shellsort</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-manual-test-cases">Part 1: Manual Test Cases</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-random-inputs">Part 2: Random Inputs</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-quadratic-solver">Exercise 3: Quadratic Solver</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-find-bug-triggering-inputs">Part 1: Find bug-triggering inputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-fix-the-problem">Part 2: Fix the problem</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-3-odds-and-ends">Part 3: Odds and Ends</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-to-infinity-and-beyond">Exercise 4: To Infinity and Beyond</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="introduction-to-software-testing">
<h1>Introduction to Software Testing<a class="headerlink" href="#introduction-to-software-testing" title="Link to this heading">#</a></h1>
<p>Before we get to the central parts of the book, let us introduce essential concepts of software testing.  Why is it necessary to test software at all?  How does one test software?  How can one tell whether a test has been successful?  How does one know if one has tested enough?  In this chapter, let us recall the most important concepts, and at the same time get acquainted with Python and interactive notebooks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">bookutils</span><span class="w"> </span><span class="kn">import</span> <span class="n">YouTubeVideo</span>
<span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;C8_pjdl7pK0&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="640"
            height="360"
            src="https://www.youtube-nocookie.com/embed/C8_pjdl7pK0"
            frameborder="0"
            allowfullscreen
            
        ></iframe>
        </div></div>
</div>
<p>This chapter (and this book) is not set to replace a textbook on testing; see the <a class="reference internal" href="#Background"><span class="xref myst">Background</span></a> at the end for recommended reads.</p>
<section id="simple-testing">
<h2>Simple Testing<a class="headerlink" href="#simple-testing" title="Link to this heading">#</a></h2>
<p>Let us start with a simple example.  Your co-worker has been asked to implement a square root function <span class="math notranslate nohighlight">\(\sqrt{x}\)</span>.  (Let’s assume for a moment that the environment does  not already have one.)  After studying the <a class="reference external" href="https://en.wikipedia.org/wiki/Newton%27s_method">Newton–Raphson method</a>, she comes up with the following Python code, claiming that, in fact, this <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> function computes square roots.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Computes the square root of x, using the Newton-Raphson method&quot;&quot;&quot;</span>
    <span class="n">approx</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">approx</span> <span class="o">!=</span> <span class="n">guess</span><span class="p">:</span>
        <span class="n">approx</span> <span class="o">=</span> <span class="n">guess</span>
        <span class="n">guess</span> <span class="o">=</span> <span class="p">(</span><span class="n">approx</span> <span class="o">+</span> <span class="n">x</span> <span class="o">/</span> <span class="n">approx</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">approx</span>
</pre></div>
</div>
</div>
</div>
<p>Your job is now to find out whether this function actually does what it claims to do.</p>
<section id="understanding-python-programs">
<h3>Understanding Python Programs<a class="headerlink" href="#understanding-python-programs" title="Link to this heading">#</a></h3>
<p>If you’re new to Python, you might first have to understand what the above code does.  We very much recommend the <a class="reference external" href="https://docs.python.org/3/tutorial/">Python tutorial</a> to get an idea on how Python works.  The most important things for you to understand the above code are these three:</p>
<ol class="arabic simple">
<li><p>Python structures programs through <em>indentation</em>, so the function and <code class="docutils literal notranslate"><span class="pre">while</span></code> bodies are defined by being indented;</p></li>
<li><p>Python is <em>dynamically typed</em>, meaning that the type of variables like <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">approx</span></code>, or <code class="docutils literal notranslate"><span class="pre">guess</span></code> is determined at run-time.</p></li>
<li><p>Most of Python’s syntactic features are inspired by other common languages, such as control structures (<code class="docutils literal notranslate"><span class="pre">while</span></code>, <code class="docutils literal notranslate"><span class="pre">if</span></code>), assignments (<code class="docutils literal notranslate"><span class="pre">=</span></code>), or comparisons (<code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>).</p></li>
</ol>
<p>With that, you can already understand what the above code does: Starting with a <code class="docutils literal notranslate"><span class="pre">guess</span></code> of <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">2</span></code>, it computes better and better approximations in <code class="docutils literal notranslate"><span class="pre">approx</span></code> until the value of <code class="docutils literal notranslate"><span class="pre">approx</span></code> no longer changes.  This is the value that finally is returned.</p>
</section>
<section id="running-a-function">
<h3>Running a Function<a class="headerlink" href="#running-a-function" title="Link to this heading">#</a></h3>
<p>To find out whether <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> works correctly, we can <em>test</em> it with a few values.  For <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">4</span></code>, for instance, it produces the correct value:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0
</pre></div>
</div>
</div>
</div>
<p>The upper part above <code class="docutils literal notranslate"><span class="pre">my_sqrt(4)</span></code> (a so-called <em>cell</em>) is an input to the Python interpreter, which by default <em>evaluates</em> it.  The lower part (<code class="docutils literal notranslate"><span class="pre">2.0</span></code>) is its output.  We can see that <code class="docutils literal notranslate"><span class="pre">my_sqrt(4)</span></code> produces the correct value.</p>
<p>The same holds for <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">2.0</span></code>, apparently, too:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.414213562373095
</pre></div>
</div>
</div>
</div>
</section>
<section id="interacting-with-notebooks">
<h3>Interacting with Notebooks<a class="headerlink" href="#interacting-with-notebooks" title="Link to this heading">#</a></h3>
<p>If you are reading this in the interactive notebook, you can try out <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> with other values as well.  Click on one of the above cells with invocations of <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> and change the value – say, to <code class="docutils literal notranslate"><span class="pre">my_sqrt(1)</span></code>.  Press <code class="docutils literal notranslate"><span class="pre">Shift+Enter</span></code> (or click on the play symbol) to execute it and see the result.  If you get an error message, go to the above cell with the definition of <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> and execute this first.  You can also run <em>all</em> cells at once; see the Notebook menu for details.  (You can actually also change the text by clicking on it, and corect mistaks such as in this sentence.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">bookutils</span><span class="w"> </span><span class="kn">import</span> <span class="n">quiz</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
    
    <script>
    var bad_answers = new Map();

    function answer(quiz_id) {
        ans = 0;
        for (i = 1;; i++) {
            checkbox = document.getElementById(quiz_id + "-" + i.toString());
            if (!checkbox)
                break;
            if (checkbox.checked)
                ans |= (1 << i);
        }
        return ans;
    }
    function check_selection(quiz_id, correct_answer, multiple_choice, hint) {
        given_answer = answer(quiz_id);
        if (given_answer == correct_answer)
        {
            document.getElementById(quiz_id + "-submit").value = "Correct!";
            document.getElementById(quiz_id + "-hint").innerHTML = "";

            for (i = 1;; i++) {
                checkbox = document.getElementById(quiz_id + "-" + i.toString());
                label = document.getElementById(quiz_id + "-" + i.toString() + "-label")
                if (!checkbox)
                    break;

                if (checkbox.checked) {
                    label.style.fontWeight = "bold";
                }
                else {
                    label.style.textDecoration = "line-through";
                }
            }
        }
        else 
        {
            document.getElementById(quiz_id + "-submit").value = "Try again";

            if (!bad_answers.has(quiz_id)) {
                bad_answers.set(quiz_id, 1);
            }
            else {
                bad_answers.set(quiz_id, bad_answers.get(quiz_id) + 1);
            }

            if (bad_answers.get(quiz_id) >= 2 && hint.length > 0) {
                document.getElementById(quiz_id + "-hint").innerHTML = 
                    "&nbsp;&nbsp;(Hint: <code>" + hint + "</code>)";
            }

            if (!multiple_choice) {
                for (i = 1;; i++) {
                    checkbox = document.getElementById(quiz_id + "-" + i.toString());
                    label = document.getElementById(quiz_id + "-" + i.toString() + "-label")

                    if (!checkbox)
                        break;
                    if (checkbox.checked) {
                        label.style.textDecoration = "line-through";
                    }
                }
            }
        }
    }
    function clear_selection(quiz_id) {
        document.getElementById(quiz_id + "-submit").value = "Submit";
        document.getElementById(quiz_id + "-hint").innerHTML = "";
    }
    </script>
    
    <div class="quiz">
    <h3 class="quiz_title">Quiz</h3>
    <p>
    <div class="quiz_question">What does <code>my_sqrt(16)</code> produce?</div>
    </p>
    <p>
    <div class="quiz_options" title="Pick a choice.">
    
        <input type="radio" name="9b9b4558-b295-11f0-840b-6298cf1a5790" id="9b9b4558-b295-11f0-840b-6298cf1a5790-1" onclick="clear_selection('9b9b4558-b295-11f0-840b-6298cf1a5790')">
        <label id="9b9b4558-b295-11f0-840b-6298cf1a5790-1-label" for="9b9b4558-b295-11f0-840b-6298cf1a5790-1">4</label><br>
    
        <input type="radio" name="9b9b4558-b295-11f0-840b-6298cf1a5790" id="9b9b4558-b295-11f0-840b-6298cf1a5790-2" onclick="clear_selection('9b9b4558-b295-11f0-840b-6298cf1a5790')">
        <label id="9b9b4558-b295-11f0-840b-6298cf1a5790-2-label" for="9b9b4558-b295-11f0-840b-6298cf1a5790-2">4.0</label><br>
    
        <input type="radio" name="9b9b4558-b295-11f0-840b-6298cf1a5790" id="9b9b4558-b295-11f0-840b-6298cf1a5790-3" onclick="clear_selection('9b9b4558-b295-11f0-840b-6298cf1a5790')">
        <label id="9b9b4558-b295-11f0-840b-6298cf1a5790-3-label" for="9b9b4558-b295-11f0-840b-6298cf1a5790-3">3.99999</label><br>
    
        <input type="radio" name="9b9b4558-b295-11f0-840b-6298cf1a5790" id="9b9b4558-b295-11f0-840b-6298cf1a5790-4" onclick="clear_selection('9b9b4558-b295-11f0-840b-6298cf1a5790')">
        <label id="9b9b4558-b295-11f0-840b-6298cf1a5790-4-label" for="9b9b4558-b295-11f0-840b-6298cf1a5790-4">None</label><br>
    
    </div>
    </p>
    <input id="9b9b4558-b295-11f0-840b-6298cf1a5790-submit" type="submit" value="Submit" onclick="check_selection('9b9b4558-b295-11f0-840b-6298cf1a5790', 4, 0, 'len(\&#x27;four\&#x27;) - len(\&#x27;two\&#x27;) + 1')">
    <span class="quiz_hint" id="9b9b4558-b295-11f0-840b-6298cf1a5790-hint"></span>
    </div>
    </div></div>
</div>
<p>Try it out for yourself by uncommenting and executing the following line:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># my_sqrt(16)</span>
</pre></div>
</div>
</div>
</div>
<p>Executing a single cell does not execute other cells, so if your cell builds on a definition in another cell that you have not executed yet, you will get an error.  You can select <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">all</span> <span class="pre">cells</span> <span class="pre">above</span></code> from the menu to ensure all definitions are set.</p>
<p>Also keep in mind that, unless overwritten, all definitions are kept across executions.  Occasionally, it thus helps to <em>restart the kernel</em> (i.e. start the Python interpreter from scratch) to get rid of older, superfluous definitions.</p>
</section>
<section id="debugging-a-function">
<h3>Debugging a Function<a class="headerlink" href="#debugging-a-function" title="Link to this heading">#</a></h3>
<p>To see how <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> operates, a simple strategy is to insert <code class="docutils literal notranslate"><span class="pre">print()</span></code> statements in critical places.  You can, for instance, log the value of <code class="docutils literal notranslate"><span class="pre">approx</span></code>, to see how each loop iteration gets closer to the actual value:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">my_sqrt_with_log</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Computes the square root of x, using the Newton–Raphson method&quot;&quot;&quot;</span>
    <span class="n">approx</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">approx</span> <span class="o">!=</span> <span class="n">guess</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;approx =&quot;</span><span class="p">,</span> <span class="n">approx</span><span class="p">)</span>  <span class="c1"># &lt;-- New</span>
        <span class="n">approx</span> <span class="o">=</span> <span class="n">guess</span>
        <span class="n">guess</span> <span class="o">=</span> <span class="p">(</span><span class="n">approx</span> <span class="o">+</span> <span class="n">x</span> <span class="o">/</span> <span class="n">approx</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">approx</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_sqrt_with_log</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>approx = None
approx = 4.5
approx = 3.25
approx = 3.0096153846153846
approx = 3.000015360039322
approx = 3.0000000000393214
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.0
</pre></div>
</div>
</div>
</div>
<p>Interactive notebooks also allow launching an interactive <em>debugger</em> – insert a “magic line” <code class="docutils literal notranslate"><span class="pre">%%debug</span></code> at the top of a cell and see what happens.  Unfortunately, interactive debuggers interfere with our dynamic analysis techniques, so we mostly use logging and assertions for debugging.</p>
</section>
<section id="checking-a-function">
<h3>Checking a Function<a class="headerlink" href="#checking-a-function" title="Link to this heading">#</a></h3>
<p>Let’s get back to testing.  We can read and run the code, but are the above values of <code class="docutils literal notranslate"><span class="pre">my_sqrt(2)</span></code> actually correct?  We can easily verify by exploiting that <span class="math notranslate nohighlight">\(\sqrt{x}\)</span> squared again has to be <span class="math notranslate nohighlight">\(x\)</span>, or in other words <span class="math notranslate nohighlight">\(\sqrt{x} \times \sqrt{x} = x\)</span>.  Let’s take a look:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.9999999999999996
</pre></div>
</div>
</div>
</div>
<p>Okay, we do have some rounding error, but otherwise, this seems just fine.</p>
<p>What we have done now is that we have <em>tested</em> the above program: We have <em>executed</em> it on a given input and <em>checked</em> its result whether it is correct or not.  Such a test is the bare minimum of quality assurance before a program goes into production.</p>
</section>
</section>
<section id="automating-test-execution">
<h2>Automating Test Execution<a class="headerlink" href="#automating-test-execution" title="Link to this heading">#</a></h2>
<p>So far, we have tested the above program <em>manually</em>, that is, running it by hand and checking its results by hand.  This is a very flexible way of testing, but in the long run, it is rather inefficient:</p>
<ol class="arabic simple">
<li><p>Manually, you can only check a very limited number of executions and their results</p></li>
<li><p>After any change to the program, you have to repeat the testing process</p></li>
</ol>
<p>This is why it is very useful to <em>automate</em> tests.  One simple way of doing so is to let the computer first do the computation, and then have it check the results.</p>
<p>For instance, this piece of code automatically tests whether <span class="math notranslate nohighlight">\(\sqrt{4} = 2\)</span> holds:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">expected_result</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">expected_result</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Test passed&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Test failed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Test passed
</pre></div>
</div>
</div>
</div>
<p>The nice thing about this test is that we can run it again and again, thus ensuring that at least the square root of 4 is computed correctly.  But there are still a number of issues, though:</p>
<ol class="arabic simple">
<li><p>We need <em>five lines of code</em> for a single test</p></li>
<li><p>We do not care for rounding errors</p></li>
<li><p>We only check a single input (and a single result)</p></li>
</ol>
<p>Let us address these issues one by one.  First, let’s make the test a bit more compact.  Almost all programming languages do have a means to automatically check whether a condition holds, and stop execution if it does not.  This is called an <em>assertion</em>, and it is immensely useful for testing.</p>
<p>In Python, the <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement takes a condition, and if the condition is true, nothing happens.  (If everything works as it should, you should not be bothered.)  If the condition evaluates to false, though, <code class="docutils literal notranslate"><span class="pre">assert</span></code> raises an exception, indicating that a test just failed.</p>
<p>In our example, we can use <code class="docutils literal notranslate"><span class="pre">assert</span></code> to easily check whether <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> yields the expected result as above:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<p>As you execute this line of code, nothing happens: We just have shown (or asserted) that our implementation indeed produces <span class="math notranslate nohighlight">\(\sqrt{4} = 2\)</span>.</p>
<p>Remember, though, that floating-point computations may induce rounding errors.  So we cannot simply compare two floating-point values with equality; rather, we would ensure that the absolute difference between them stays below a certain threshold value, typically denoted as <span class="math notranslate nohighlight">\(\epsilon\)</span> or <code class="docutils literal notranslate"><span class="pre">epsilon</span></code>.  This is how we can do it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">EPSILON</span> <span class="o">=</span> <span class="mf">1e-8</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">EPSILON</span>
</pre></div>
</div>
</div>
</div>
<p>We can also introduce a special function for this purpose, and now do more tests for concrete values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">assertEquals</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="mf">1e-8</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">epsilon</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Seems to work, right?  If we know the expected results of a computation, we can use such assertions again and again to ensure our program works correctly.</p>
<p>(Hint: a true Python programmer would use the function <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isclose"><code class="docutils literal notranslate"><span class="pre">math.isclose()</span></code></a> instead.)</p>
</section>
<section id="generating-tests">
<h2>Generating Tests<a class="headerlink" href="#generating-tests" title="Link to this heading">#</a></h2>
<p>Remember that the property <span class="math notranslate nohighlight">\(\sqrt{x} \times \sqrt{x} = x\)</span> universally holds?  We can also explicitly test this with a few values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="mf">42.11</span><span class="p">)</span> <span class="o">*</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="mf">42.11</span><span class="p">),</span> <span class="mf">42.11</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Still seems to work, right?  Most importantly, though, <span class="math notranslate nohighlight">\(\sqrt{x} \times \sqrt{x} = x\)</span> is something we can very easily test for thousands of values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">):</span>
    <span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>How much time does it take to test <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> with 100 values?  Let’s see.</p>
<p>We use our own <a class="reference internal" href="Timer.html"><span class="std std-doc"><code class="docutils literal notranslate"><span class="pre">Timer</span></code> module</span></a> to measure elapsed time.  To be able to use <code class="docutils literal notranslate"><span class="pre">Timer</span></code>, we first import our own utility module, which allows us to import other notebooks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">bookutils.setup</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">Timer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Timer</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Timer</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">):</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">n</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">elapsed_time</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.015665374987293035
</pre></div>
</div>
</div>
</div>
<p>10,000 values take about a hundredth of a second, so a single execution of <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> takes 1/1000000 second, or about 1 microseconds.</p>
<p>Let’s repeat this with 10,000 values picked at random.  The Python <code class="docutils literal notranslate"><span class="pre">random.random()</span></code> function returns a random value between 0.0 and 1.0:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Timer</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000000</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">elapsed_time</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.018447957991156727
</pre></div>
</div>
</div>
</div>
<p>Within a second, we have now tested 10,000 random values, and each time, the square root was actually computed correctly.  We can repeat this test with every single change to <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code>, each time reinforcing our confidence that <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> works as it should.  Note, though, that while a random function is <em>unbiased</em> in producing random values, it is unlikely to generate special values that drastically alter program behavior.  We will discuss this later below.</p>
</section>
<section id="run-time-verification">
<h2>Run-Time Verification<a class="headerlink" href="#run-time-verification" title="Link to this heading">#</a></h2>
<p>Instead of writing and running tests for <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code>, we can also go and <em>integrate the check right into the implementation.</em>  This way, <em>each and every</em> invocation of <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> will be automatically checked.</p>
<p>Such an <em>automatic run-time check</em> is very easy to implement:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">my_sqrt_checked</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">assertEquals</span><span class="p">(</span><span class="n">root</span> <span class="o">*</span> <span class="n">root</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">root</span>
</pre></div>
</div>
</div>
</div>
<p>Now, whenever we compute a root with <code class="docutils literal notranslate"><span class="pre">my_sqrt_checked()</span></code><span class="math notranslate nohighlight">\(\dots\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_sqrt_checked</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.414213562373095
</pre></div>
</div>
</div>
</div>
<p>… we already know that the result is correct, and will so for every new successful computation.</p>
<p>Automatic run-time checks, as above, assume two things, though:</p>
<ul class="simple">
<li><p>One has to be able to <em>formulate</em> such run-time checks.  Having concrete values to check against should always be possible, but formulating desired properties in an abstract fashion can be very complex.  In practice, you need to decide which properties are most crucial, and design appropriate checks for them.  Plus, run-time checks may depend not only on local properties, but on several properties of the program state, which all have to be identified.</p></li>
<li><p>One has to be able to <em>afford</em> such run-time checks.  In the case of <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code>, the check is not very expensive; but if we have to check, say, a large data structure even after a simple operation, the cost of the check may soon be prohibitive.  In practice, run-time checks will typically be disabled during production, trading reliability for efficiency.  On the other hand, a comprehensive suite of run-time checks is a great way to find errors and quickly debug them; you need to decide how many such capabilities you would still want during production.</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
    
    <script>
    var bad_answers = new Map();

    function answer(quiz_id) {
        ans = 0;
        for (i = 1;; i++) {
            checkbox = document.getElementById(quiz_id + "-" + i.toString());
            if (!checkbox)
                break;
            if (checkbox.checked)
                ans |= (1 << i);
        }
        return ans;
    }
    function check_selection(quiz_id, correct_answer, multiple_choice, hint) {
        given_answer = answer(quiz_id);
        if (given_answer == correct_answer)
        {
            document.getElementById(quiz_id + "-submit").value = "Correct!";
            document.getElementById(quiz_id + "-hint").innerHTML = "";

            for (i = 1;; i++) {
                checkbox = document.getElementById(quiz_id + "-" + i.toString());
                label = document.getElementById(quiz_id + "-" + i.toString() + "-label")
                if (!checkbox)
                    break;

                if (checkbox.checked) {
                    label.style.fontWeight = "bold";
                }
                else {
                    label.style.textDecoration = "line-through";
                }
            }
        }
        else 
        {
            document.getElementById(quiz_id + "-submit").value = "Try again";

            if (!bad_answers.has(quiz_id)) {
                bad_answers.set(quiz_id, 1);
            }
            else {
                bad_answers.set(quiz_id, bad_answers.get(quiz_id) + 1);
            }

            if (bad_answers.get(quiz_id) >= 2 && hint.length > 0) {
                document.getElementById(quiz_id + "-hint").innerHTML = 
                    "&nbsp;&nbsp;(Hint: <code>" + hint + "</code>)";
            }

            if (!multiple_choice) {
                for (i = 1;; i++) {
                    checkbox = document.getElementById(quiz_id + "-" + i.toString());
                    label = document.getElementById(quiz_id + "-" + i.toString() + "-label")

                    if (!checkbox)
                        break;
                    if (checkbox.checked) {
                        label.style.textDecoration = "line-through";
                    }
                }
            }
        }
    }
    function clear_selection(quiz_id) {
        document.getElementById(quiz_id + "-submit").value = "Submit";
        document.getElementById(quiz_id + "-hint").innerHTML = "";
    }
    </script>
    
    <div class="quiz">
    <h3 class="quiz_title">Quiz</h3>
    <p>
    <div class="quiz_question">Does run-time checking give a guarantee that there will always be a correct result?</div>
    </p>
    <p>
    <div class="quiz_options" title="Pick a choice.">
    
        <input type="radio" name="9baec34e-b295-11f0-840b-6298cf1a5790" id="9baec34e-b295-11f0-840b-6298cf1a5790-1" onclick="clear_selection('9baec34e-b295-11f0-840b-6298cf1a5790')">
        <label id="9baec34e-b295-11f0-840b-6298cf1a5790-1-label" for="9baec34e-b295-11f0-840b-6298cf1a5790-1">Yes</label><br>
    
        <input type="radio" name="9baec34e-b295-11f0-840b-6298cf1a5790" id="9baec34e-b295-11f0-840b-6298cf1a5790-2" onclick="clear_selection('9baec34e-b295-11f0-840b-6298cf1a5790')">
        <label id="9baec34e-b295-11f0-840b-6298cf1a5790-2-label" for="9baec34e-b295-11f0-840b-6298cf1a5790-2">No</label><br>
    
    </div>
    </p>
    <input id="9baec34e-b295-11f0-840b-6298cf1a5790-submit" type="submit" value="Submit" onclick="check_selection('9baec34e-b295-11f0-840b-6298cf1a5790', 4, 0, '1 ** 1 + 1 ** 1')">
    <span class="quiz_hint" id="9baec34e-b295-11f0-840b-6298cf1a5790-hint"></span>
    </div>
    </div></div>
</div>
<p>An important limitation of run-time checks is that they ensure correctness <em>only if there is a result</em> to be checked - that is, they do <em>not</em> guarantee that there always will be one. This is an important limitation compared to <em>symbolic verification techniques</em> and program proofs, which can also guarantee that there is a result – at a much higher (often manual) effort, though.</p>
</section>
<section id="system-input-vs-function-input">
<h2>System Input vs Function Input<a class="headerlink" href="#system-input-vs-function-input" title="Link to this heading">#</a></h2>
<p>At this point, we may make <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> available to other programmers, who may then embed it in their code.  At some point, it will have to process input that comes from <em>third parties</em>, i.e. is not under control by the programmer.</p>
<p>Let us simulate this <em>system input</em> by assuming a <em>program</em> <code class="docutils literal notranslate"><span class="pre">sqrt_program()</span></code> whose input is a string under third-party control:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sqrt_program</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The root of&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>We assume that <code class="docutils literal notranslate"><span class="pre">sqrt_program</span></code> is a program which accepts system input from the command line, as in</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sqrt_program<span class="w"> </span><span class="m">4</span>
<span class="m">2</span>
</pre></div>
</div>
<p>We can easily invoke <code class="docutils literal notranslate"><span class="pre">sqrt_program()</span></code> with some system input:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt_program</span><span class="p">(</span><span class="s2">&quot;4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The root of 4 is 2.0
</pre></div>
</div>
</div>
</div>
<p>What’s the problem?  Well, the problem is that we do not check external inputs for validity.  Try invoking <code class="docutils literal notranslate"><span class="pre">sqrt_program(-1)</span></code>, for instance.  What happens?</p>
<p>Indeed, if you invoke <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> with a negative number, it enters an infinite loop.  For technical reasons, we cannot have infinite loops in this chapter (unless we’d want the code to run forever); so we use a special <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">ExpectTimeOut(1)</span></code> construct to interrupt execution after one second.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ExpectError</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExpectTimeout</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectTimeout</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">sqrt_program</span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/1288144681.py&quot;, line 2, in &lt;module&gt;
    sqrt_program(&quot;-1&quot;)
    ~~~~~~~~~~~~^^^^^^
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/449782637.py&quot;, line 3, in sqrt_program
    print(&#39;The root of&#39;, x, &#39;is&#39;, my_sqrt(x))
                                  ~~~~~~~^^^
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/2661069967.py&quot;, line 5, in my_sqrt
    while approx != guess:
          ^^^^^^^^^^^^^^^
  File &quot;Timeout.ipynb&quot;, line 43, in timeout_handler
    raise TimeoutError()
TimeoutError (expected)
</pre></div>
</div>
</div>
</div>
<p>The above message is an <em>error message</em>, indicating that something went wrong.  It lists the <em>call stack</em> of functions and lines that were active at the time of the error.  The line at the very bottom is the line last executed; the lines above represent function invocations – in our case, up to <code class="docutils literal notranslate"><span class="pre">my_sqrt(x)</span></code>.</p>
<p>We don’t want our code terminating with an exception.  Consequently, when accepting external input, we must ensure that it is properly validated.  We may write, for instance:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sqrt_program</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Illegal Input&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The root of&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>and then we can be sure that <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code> is only invoked according to its specification.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt_program</span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Illegal Input
</pre></div>
</div>
</div>
</div>
<p>But wait!  What happens if <code class="docutils literal notranslate"><span class="pre">sqrt_program()</span></code> is not invoked with a number?</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
    
    <script>
    var bad_answers = new Map();

    function answer(quiz_id) {
        ans = 0;
        for (i = 1;; i++) {
            checkbox = document.getElementById(quiz_id + "-" + i.toString());
            if (!checkbox)
                break;
            if (checkbox.checked)
                ans |= (1 << i);
        }
        return ans;
    }
    function check_selection(quiz_id, correct_answer, multiple_choice, hint) {
        given_answer = answer(quiz_id);
        if (given_answer == correct_answer)
        {
            document.getElementById(quiz_id + "-submit").value = "Correct!";
            document.getElementById(quiz_id + "-hint").innerHTML = "";

            for (i = 1;; i++) {
                checkbox = document.getElementById(quiz_id + "-" + i.toString());
                label = document.getElementById(quiz_id + "-" + i.toString() + "-label")
                if (!checkbox)
                    break;

                if (checkbox.checked) {
                    label.style.fontWeight = "bold";
                }
                else {
                    label.style.textDecoration = "line-through";
                }
            }
        }
        else 
        {
            document.getElementById(quiz_id + "-submit").value = "Try again";

            if (!bad_answers.has(quiz_id)) {
                bad_answers.set(quiz_id, 1);
            }
            else {
                bad_answers.set(quiz_id, bad_answers.get(quiz_id) + 1);
            }

            if (bad_answers.get(quiz_id) >= 2 && hint.length > 0) {
                document.getElementById(quiz_id + "-hint").innerHTML = 
                    "&nbsp;&nbsp;(Hint: <code>" + hint + "</code>)";
            }

            if (!multiple_choice) {
                for (i = 1;; i++) {
                    checkbox = document.getElementById(quiz_id + "-" + i.toString());
                    label = document.getElementById(quiz_id + "-" + i.toString() + "-label")

                    if (!checkbox)
                        break;
                    if (checkbox.checked) {
                        label.style.textDecoration = "line-through";
                    }
                }
            }
        }
    }
    function clear_selection(quiz_id) {
        document.getElementById(quiz_id + "-submit").value = "Submit";
        document.getElementById(quiz_id + "-hint").innerHTML = "";
    }
    </script>
    
    <div class="quiz">
    <h3 class="quiz_title">Quiz</h3>
    <p>
    <div class="quiz_question">What is the result of <code>sqrt_program('xyzzy')</code>?</div>
    </p>
    <p>
    <div class="quiz_options" title="Pick a choice.">
    
        <input type="radio" name="9c4cd750-b295-11f0-840b-6298cf1a5790" id="9c4cd750-b295-11f0-840b-6298cf1a5790-1" onclick="clear_selection('9c4cd750-b295-11f0-840b-6298cf1a5790')">
        <label id="9c4cd750-b295-11f0-840b-6298cf1a5790-1-label" for="9c4cd750-b295-11f0-840b-6298cf1a5790-1">0</label><br>
    
        <input type="radio" name="9c4cd750-b295-11f0-840b-6298cf1a5790" id="9c4cd750-b295-11f0-840b-6298cf1a5790-2" onclick="clear_selection('9c4cd750-b295-11f0-840b-6298cf1a5790')">
        <label id="9c4cd750-b295-11f0-840b-6298cf1a5790-2-label" for="9c4cd750-b295-11f0-840b-6298cf1a5790-2">0.0</label><br>
    
        <input type="radio" name="9c4cd750-b295-11f0-840b-6298cf1a5790" id="9c4cd750-b295-11f0-840b-6298cf1a5790-3" onclick="clear_selection('9c4cd750-b295-11f0-840b-6298cf1a5790')">
        <label id="9c4cd750-b295-11f0-840b-6298cf1a5790-3-label" for="9c4cd750-b295-11f0-840b-6298cf1a5790-3"><code>None</code></label><br>
    
        <input type="radio" name="9c4cd750-b295-11f0-840b-6298cf1a5790" id="9c4cd750-b295-11f0-840b-6298cf1a5790-4" onclick="clear_selection('9c4cd750-b295-11f0-840b-6298cf1a5790')">
        <label id="9c4cd750-b295-11f0-840b-6298cf1a5790-4-label" for="9c4cd750-b295-11f0-840b-6298cf1a5790-4">An exception</label><br>
    
    </div>
    </p>
    <input id="9c4cd750-b295-11f0-840b-6298cf1a5790-submit" type="submit" value="Submit" onclick="check_selection('9c4cd750-b295-11f0-840b-6298cf1a5790', 16, 0, '16 ** 0.5')">
    <span class="quiz_hint" id="9c4cd750-b295-11f0-840b-6298cf1a5790-hint"></span>
    </div>
    </div></div>
</div>
<p>Let’s try this out! When we try to convert a non-number string, this would also result in a runtime error:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ExpectError</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExpectError</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectError</span><span class="p">():</span>
    <span class="n">sqrt_program</span><span class="p">(</span><span class="s2">&quot;xyzzy&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/1336991207.py&quot;, line 2, in &lt;module&gt;
    sqrt_program(&quot;xyzzy&quot;)
    ~~~~~~~~~~~~^^^^^^^^^
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/3211514011.py&quot;, line 2, in sqrt_program
    x = int(arg)
ValueError: invalid literal for int() with base 10: &#39;xyzzy&#39; (expected)
</pre></div>
</div>
</div>
</div>
<p>Here’s a version which also checks for bad inputs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sqrt_program</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Illegal Input&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Illegal Number&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The root of&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt_program</span><span class="p">(</span><span class="s2">&quot;4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The root of 4.0 is 2.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt_program</span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Illegal Number
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt_program</span><span class="p">(</span><span class="s2">&quot;xyzzy&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Illegal Input
</pre></div>
</div>
</div>
</div>
<p>We have now seen that at the system level, the program must be able to handle any kind of input gracefully without ever entering an uncontrolled state.  This, of course, is a burden for programmers, who must struggle to make their programs robust for all circumstances.  This burden, however, becomes a <em>benefit</em> when generating software tests: If a program can handle any kind of input (possibly with well-defined error messages), we can also <em>send it any kind of input</em>.  When calling a function with generated values, though, we have to <em>know</em> its precise preconditions.</p>
</section>
<section id="the-limits-of-testing">
<h2>The Limits of Testing<a class="headerlink" href="#the-limits-of-testing" title="Link to this heading">#</a></h2>
<p>Despite our best efforts in testing, keep in mind that you are always checking functionality for a <em>finite</em> set of inputs.  Thus, there may always be <em>untested</em> inputs for which the function may still fail.</p>
<p>In the case of <code class="docutils literal notranslate"><span class="pre">my_sqrt()</span></code>, for instance, computing <span class="math notranslate nohighlight">\(\sqrt{0}\)</span> results in a division by zero:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectError</span><span class="p">():</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/820411145.py&quot;, line 2, in &lt;module&gt;
    root = my_sqrt(0)
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/2661069967.py&quot;, line 7, in my_sqrt
    guess = (approx + x / approx) / 2
                      ~~^~~~~~~~
ZeroDivisionError: float division by zero (expected)
</pre></div>
</div>
</div>
</div>
<p>In our tests so far, we have not checked this condition, meaning that a program which builds on <span class="math notranslate nohighlight">\(\sqrt{0} = 0\)</span> will surprisingly fail.  But even if we had set up our random generator to produce inputs in the range of 0–1000000 rather than 1–1000000, the chances of it producing a zero value by chance would still have been one in a million.  If the behavior of a function is radically different for few individual values, plain random testing has few chances to produce these.</p>
<p>We can, of course, fix the function accordingly, documenting the accepted values for <code class="docutils literal notranslate"><span class="pre">x</span></code> and handling the special case <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">0</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">my_sqrt_fixed</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">my_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>With this, we can now correctly compute <span class="math notranslate nohighlight">\(\sqrt{0} = 0\)</span>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">my_sqrt_fixed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
<p>Illegal values now result in an exception:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectError</span><span class="p">():</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">my_sqrt_fixed</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/305965227.py&quot;, line 2, in &lt;module&gt;
    root = my_sqrt_fixed(-1)
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/3001478627.py&quot;, line 2, in my_sqrt_fixed
    assert 0 &lt;= x
           ^^^^^^
AssertionError (expected)
</pre></div>
</div>
</div>
</div>
<p>Still, we have to remember that while extensive testing may give us a high confidence into the correctness of a program, it does not provide a guarantee that all future executions will be correct.  Even run-time verification, which checks every result, can only guarantee that <em>if</em> it produces a result, the result will be correct; but there is no guarantee that future executions may not lead to a failing check.  As I am writing this, I <em>believe</em> that <code class="docutils literal notranslate"><span class="pre">my_sqrt_fixed(x)</span></code> is a correct implementation of <span class="math notranslate nohighlight">\(\sqrt{x}\)</span> for all finite numbers <span class="math notranslate nohighlight">\(x\)</span>, but I cannot be certain.</p>
<p>With the Newton-Raphson method, we may still have a good chance of actually <em>proving</em> that the implementation is correct: The implementation is simple, the math is well-understood.  Alas, this is only the case for few domains.  If we do not want to go into full-fledged correctness proofs, our best chance with testing is to</p>
<ol class="arabic simple">
<li><p>Test the program on several, well-chosen inputs; and</p></li>
<li><p>Check results extensively and automatically.</p></li>
</ol>
<p>This is what we do in the remainder of this course: Devise techniques that help us to thoroughly test a program, as well as techniques that help us check its state for correctness.  Enjoy!</p>
</section>
<section id="lessons-learned">
<h2>Lessons Learned<a class="headerlink" href="#lessons-learned" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>The aim of testing is to execute a program such that we find bugs.</p></li>
<li><p>Test execution, test generation, and checking test results can be automated.</p></li>
<li><p>Testing is <em>incomplete</em>; it provides no 100% guarantee that the code is free of errors.</p></li>
</ul>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">#</a></h2>
<p>From here, you can move on how to</p>
<ul class="simple">
<li><p><a class="reference internal" href="Fuzzer.html"><span class="std std-doc">use <em>fuzzing</em> to test programs with random inputs</span></a></p></li>
</ul>
<p>Enjoy the read!</p>
</section>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Link to this heading">#</a></h2>
<p>There is a large number of works on software testing and analysis.</p>
<ul class="simple">
<li><p>An all-new modern, comprehensive, and online textbook on testing is <a class="reference external" href="https://www.effective-software-testing.com">“Effective Software Testing: A Developer’s Guide”</a> \cite{Aniche2022}.  Much recommended!</p></li>
<li><p>For this book, we are also happy to recommend “Software Testing and Analysis” \cite{Pezze2008} as an introduction to the field; its strong technical focus very well fits our methodology.</p></li>
<li><p>Other important must-reads with a comprehensive approach to software testing, including psychology and organization, include “The Art of Software Testing” \cite{Myers2004} as well as “Software Testing Techniques” \cite{Beizer1990}.</p></li>
</ul>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">#</a></h2>
<section id="exercise-1-get-acquainted-with-notebooks-and-python">
<h3>Exercise 1: Get Acquainted with Notebooks and Python<a class="headerlink" href="#exercise-1-get-acquainted-with-notebooks-and-python" title="Link to this heading">#</a></h3>
<p>Your first exercise in this book is to get acquainted with notebooks and Python, such that you can run the code examples in the book – and try out your own. Here are a few tasks to get you started.</p>
<section id="beginner-level-run-notebooks-in-your-browser">
<h4>Beginner Level: Run Notebooks in Your Browser<a class="headerlink" href="#beginner-level-run-notebooks-in-your-browser" title="Link to this heading">#</a></h4>
<p>The easiest way to get access to the code is to run them in your browser.</p>
<ol class="arabic simple">
<li><p>From the <a class="reference internal" href="#__CHAPTER_HTML__"><span class="xref myst">Web Page</span></a>, check out the menu at the top. Select <code class="docutils literal notranslate"><span class="pre">Resources</span></code> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <code class="docutils literal notranslate"><span class="pre">Edit</span> <span class="pre">as</span> <span class="pre">Notebook</span></code>.</p></li>
<li><p>After a short waiting time, this will open a Jupyter Notebook right within your browser, containing the current chapter as a notebook.</p></li>
<li><p>You can again scroll through the material, but you click on any code example to edit and run its code (by entering <kbd>Shift</kbd> + <kbd>Return</kbd>). You can edit the examples as you please.</p></li>
<li><p>Note that code examples typically depend on earlier code, so be sure to run the preceding code first.</p></li>
<li><p>Any changes you make will not be saved (unless you save your notebook to disk).</p></li>
</ol>
<p>For help on Jupyter Notebooks, from the <a class="reference internal" href="#__CHAPTER_HTML__"><span class="xref myst">Web Page</span></a>, check out the <code class="docutils literal notranslate"><span class="pre">Help</span></code> menu.</p>
</section>
<section id="advanced-level-run-python-code-on-your-machine">
<h4>Advanced Level: Run Python Code on Your Machine<a class="headerlink" href="#advanced-level-run-python-code-on-your-machine" title="Link to this heading">#</a></h4>
<p>This is useful if you want to make greater changes, but do not want to work with Jupyter.</p>
<ol class="arabic simple">
<li><p>From the <a class="reference internal" href="#__CHAPTER_HTML__"><span class="xref myst">Web Page</span></a>, check out the menu at the top. Select <code class="docutils literal notranslate"><span class="pre">Resources</span></code> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <code class="docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Code</span></code>.</p></li>
<li><p>This will download the Python code of the chapter as a single Python .py file, which you can save to your computer.</p></li>
<li><p>You can then open the file, edit it, and run it in your favorite Python environment to re-run the examples.</p></li>
<li><p>Most importantly, you can <a class="reference internal" href="Importing.html"><span class="std std-doc">import it</span></a> into your own code and reuse functions, classes, and other resources.</p></li>
</ol>
<p>For help on Python, from the <a class="reference internal" href="#__CHAPTER_HTML__"><span class="xref myst">Web Page</span></a>, check out the <code class="docutils literal notranslate"><span class="pre">Help</span></code> menu.</p>
</section>
<section id="pro-level-run-notebooks-on-your-machine">
<h4>Pro Level: Run Notebooks on Your Machine<a class="headerlink" href="#pro-level-run-notebooks-on-your-machine" title="Link to this heading">#</a></h4>
<p>This is useful if you want to work with Jupyter on your machine. This will allow you to also run more complex examples, such as those with graphical output.</p>
<ol class="arabic simple">
<li><p>From the <a class="reference internal" href="#__CHAPTER_HTML__"><span class="xref myst">Web Page</span></a>, check out the menu at the top. Select <code class="docutils literal notranslate"><span class="pre">Resources</span></code> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <code class="docutils literal notranslate"><span class="pre">All</span> <span class="pre">Notebooks</span></code>.</p></li>
<li><p>This will download all Jupyter Notebooks as a collection of <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> files, which you can save to your computer.</p></li>
<li><p>You can then open the notebooks in Jupyter Notebook or Jupyter Lab, edit them, and run them. To navigate across notebooks, open the notebook <a class="reference internal" href="#00_Table_of_Contents.ipynb"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">00_Table_of_Contents.ipynb</span></code></span></a>.</p></li>
<li><p>You can also download individual notebooks using Select <code class="docutils literal notranslate"><span class="pre">Resources</span></code> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <code class="docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Notebook</span></code>. Running these, however, will require that you have the other notebooks downloaded already.</p></li>
</ol>
<p>For help on Jupyter Notebooks, from the <a class="reference internal" href="#__CHAPTER_HTML__"><span class="xref myst">Web Page</span></a>, check out the <code class="docutils literal notranslate"><span class="pre">Help</span></code> menu.</p>
</section>
<section id="boss-level-contribute">
<h4>Boss Level: Contribute!<a class="headerlink" href="#boss-level-contribute" title="Link to this heading">#</a></h4>
<p>This is useful if you want to contribute to the book with patches or other material. It also gives you access to the very latest version of the book.</p>
<ol class="arabic simple">
<li><p>From the <a class="reference internal" href="#__CHAPTER_HTML__"><span class="xref myst">Web Page</span></a>, check out the menu at the top. Select <code class="docutils literal notranslate"><span class="pre">Resources</span></code> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">Repo</span></code>.</p></li>
<li><p>This will get you to the GitHub repository which contains all sources of the book, including the latest notebooks.</p></li>
<li><p>You can then <em>clone</em> this repository to your disk, such that you get the latest and greatest.</p></li>
<li><p>You can report issues and suggest pull requests on the GitHub page.</p></li>
<li><p>Updating the repository with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> will get you updated.</p></li>
</ol>
<p>If you want to contribute code or text, check out the <a class="reference internal" href="Guide_for_Authors.html"><span class="std std-doc">Guide for Authors</span></a>.</p>
</section>
</section>
<section id="exercise-2-testing-shellsort">
<h3>Exercise 2: Testing Shellsort<a class="headerlink" href="#exercise-2-testing-shellsort" title="Link to this heading">#</a></h3>
<p>Consider the following implementation of a <a class="reference external" href="https://en.wikipedia.org/wiki/Shellsort">Shellsort</a> function, taking a list of elements and (presumably) sorting it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">shellsort</span><span class="p">(</span><span class="n">elems</span><span class="p">):</span>
    <span class="n">sorted_elems</span> <span class="o">=</span> <span class="n">elems</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">gaps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">701</span><span class="p">,</span> <span class="mi">301</span><span class="p">,</span> <span class="mi">132</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">gap</span> <span class="ow">in</span> <span class="n">gaps</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">gap</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sorted_elems</span><span class="p">)):</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">sorted_elems</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">i</span>
            <span class="k">while</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">gap</span> <span class="ow">and</span> <span class="n">sorted_elems</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="n">gap</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">temp</span><span class="p">:</span>
                <span class="n">sorted_elems</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">sorted_elems</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="n">gap</span><span class="p">]</span>
                <span class="n">j</span> <span class="o">-=</span> <span class="n">gap</span>
            <span class="n">sorted_elems</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>

    <span class="k">return</span> <span class="n">sorted_elems</span>
</pre></div>
</div>
</div>
</div>
<p>A first test indicates that <code class="docutils literal notranslate"><span class="pre">shellsort()</span></code> might actually work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">shellsort</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3]
</pre></div>
</div>
</div>
</div>
<p>The implementation uses a <em>list</em> as argument <code class="docutils literal notranslate"><span class="pre">elems</span></code> (which it copies into <code class="docutils literal notranslate"><span class="pre">sorted_elems</span></code>) as well as for the fixed list <code class="docutils literal notranslate"><span class="pre">gaps</span></code>.  Lists work like <em>arrays</em> in other languages:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;First element:&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;length:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First element: 5 length: 4
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">range()</span></code> function returns an iterable list of elements.  It is often used in conjunction with <code class="docutils literal notranslate"><span class="pre">for</span></code> loops, as in the above implementation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
2
3
4
</pre></div>
</div>
</div>
</div>
<section id="part-1-manual-test-cases">
<h4>Part 1: Manual Test Cases<a class="headerlink" href="#part-1-manual-test-cases" title="Link to this heading">#</a></h4>
<p>Your job is now to thoroughly test <code class="docutils literal notranslate"><span class="pre">shellsort()</span></code> with a variety of inputs.</p>
<p>First, set up <code class="docutils literal notranslate"><span class="pre">assert</span></code> statements with a number of manually written test cases.  Select your test cases such that extreme cases are covered.  Use <code class="docutils literal notranslate"><span class="pre">==</span></code> to compare two lists.</p>
<p><strong>Solution.</strong> Here are a few selected test cases:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard lists</span>
<span class="k">assert</span> <span class="n">shellsort</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">shellsort</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">shellsort</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check for duplicates</span>
<span class="k">assert</span> <span class="n">shellsort</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Empty list</span>
<span class="k">assert</span> <span class="n">shellsort</span><span class="p">([])</span> <span class="o">==</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="part-2-random-inputs">
<h4>Part 2: Random Inputs<a class="headerlink" href="#part-2-random-inputs" title="Link to this heading">#</a></h4>
<p>Second, create random lists as arguments to <code class="docutils literal notranslate"><span class="pre">shellsort()</span></code>.   Make use of the following helper predicates to check whether the result is (a) sorted, and (b) a permutation of the original.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">is_sorted</span><span class="p">(</span><span class="n">elems</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">elems</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">elems</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_sorted</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">is_permutation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span> <span class="o">==</span> <span class="n">b</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_permutation</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Start with a random list generator, using <code class="docutils literal notranslate"><span class="pre">[]</span></code> as the empty list and <code class="docutils literal notranslate"><span class="pre">elems.append(x)</span></code> to append an element <code class="docutils literal notranslate"><span class="pre">x</span></code> to the list <code class="docutils literal notranslate"><span class="pre">elems</span></code>.  Use the above helper functions to assess the results.  Generate and test 1,000 lists.</p>
<p><strong>Solution.</strong> Here’s a simple random list generator:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">random_list</span><span class="p">():</span>
    <span class="n">length</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">elems</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
        <span class="n">elems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">elems</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">random_list</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[61, 23, 61, 68]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">elems</span> <span class="o">=</span> <span class="n">random_list</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[51, 47, 88, 14, 38]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sorted_elems</span> <span class="o">=</span> <span class="n">shellsort</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sorted_elems</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[14, 38, 47, 51, 88]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">is_sorted</span><span class="p">(</span><span class="n">sorted_elems</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_permutation</span><span class="p">(</span><span class="n">sorted_elems</span><span class="p">,</span> <span class="n">elems</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here’s the test for 1,000 lists:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">elems</span> <span class="o">=</span> <span class="n">random_list</span><span class="p">()</span>
    <span class="n">sorted_elems</span> <span class="o">=</span> <span class="n">shellsort</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">is_sorted</span><span class="p">(</span><span class="n">sorted_elems</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_permutation</span><span class="p">(</span><span class="n">sorted_elems</span><span class="p">,</span> <span class="n">elems</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="exercise-3-quadratic-solver">
<h3>Exercise 3: Quadratic Solver<a class="headerlink" href="#exercise-3-quadratic-solver" title="Link to this heading">#</a></h3>
<p>Given an equation <span class="math notranslate nohighlight">\(ax^2 + bx + c = 0\)</span>, we want to find solutions for <span class="math notranslate nohighlight">\(x\)</span> given the values of <span class="math notranslate nohighlight">\(a\)</span>, <span class="math notranslate nohighlight">\(b\)</span>, and <span class="math notranslate nohighlight">\(c\)</span>.  The following code is supposed to do this, using the equation
$<span class="math notranslate nohighlight">\(
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
\)</span>$</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">quadratic_solver</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span>
    <span class="n">solution_1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span> <span class="o">+</span> <span class="n">my_sqrt_fixed</span><span class="p">(</span><span class="n">q</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
    <span class="n">solution_2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span> <span class="o">-</span> <span class="n">my_sqrt_fixed</span><span class="p">(</span><span class="n">q</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">solution_1</span><span class="p">,</span> <span class="n">solution_2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quadratic_solver</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-0.3333333333333333, -1.0)
</pre></div>
</div>
</div>
</div>
<p>The above implementation is incomplete, though.  You can trigger</p>
<ol class="arabic simple">
<li><p>a division by zero; and</p></li>
<li><p>violate the precondition of <code class="docutils literal notranslate"><span class="pre">my_sqrt_fixed()</span></code>.</p></li>
</ol>
<p>How does one do that, and how can one prevent this?</p>
<section id="part-1-find-bug-triggering-inputs">
<h4>Part 1: Find bug-triggering inputs<a class="headerlink" href="#part-1-find-bug-triggering-inputs" title="Link to this heading">#</a></h4>
<p>For each of the two cases above, identify values for <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> that trigger the bug.</p>
<p><strong>Solution</strong>.  Here are two inputs that trigger the bugs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectError</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">quadratic_solver</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/284450257.py&quot;, line 2, in &lt;module&gt;
    print(quadratic_solver(3, 2, 1))
          ~~~~~~~~~~~~~~~~^^^^^^^^^
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/597421383.py&quot;, line 3, in quadratic_solver
    solution_1 = (-b + my_sqrt_fixed(q)) / (2 * a)
                       ~~~~~~~~~~~~~^^^
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/3001478627.py&quot;, line 2, in my_sqrt_fixed
    assert 0 &lt;= x
           ^^^^^^
AssertionError (expected)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectError</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">quadratic_solver</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/273293533.py&quot;, line 2, in &lt;module&gt;
    print(quadratic_solver(0, 0, 1))
          ~~~~~~~~~~~~~~~~^^^^^^^^^
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/597421383.py&quot;, line 3, in quadratic_solver
    solution_1 = (-b + my_sqrt_fixed(q)) / (2 * a)
                 ~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~
ZeroDivisionError: division by zero (expected)
</pre></div>
</div>
</div>
</div>
</section>
<section id="part-2-fix-the-problem">
<h4>Part 2: Fix the problem<a class="headerlink" href="#part-2-fix-the-problem" title="Link to this heading">#</a></h4>
<p>Extend the code appropriately such that the cases are handled.  Return <code class="docutils literal notranslate"><span class="pre">None</span></code> for nonexistent values.</p>
<p><strong>Solution.</strong> Here is an appropriate extension of <code class="docutils literal notranslate"><span class="pre">quadratic_solver()</span></code> that takes care of all the corner cases:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">quadratic_solver_fixed</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Actually, any value of x</span>
                <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># No value of x can satisfy c = 0</span>
                <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="n">c</span> <span class="o">/</span> <span class="n">b</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="n">q</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span>
    <span class="k">if</span> <span class="n">q</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">q</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">solution</span> <span class="o">=</span> <span class="o">-</span><span class="n">b</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="n">solution_1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span> <span class="o">+</span> <span class="n">my_sqrt_fixed</span><span class="p">(</span><span class="n">q</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
    <span class="n">solution_2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span> <span class="o">-</span> <span class="n">my_sqrt_fixed</span><span class="p">(</span><span class="n">q</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">solution_1</span><span class="p">,</span> <span class="n">solution_2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectError</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">quadratic_solver_fixed</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(None, None)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ExpectError</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">quadratic_solver_fixed</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(None, None)
</pre></div>
</div>
</div>
</div>
</section>
<section id="part-3-odds-and-ends">
<h4>Part 3: Odds and Ends<a class="headerlink" href="#part-3-odds-and-ends" title="Link to this heading">#</a></h4>
<p>What are the chances of discovering these conditions with random inputs?  Assuming one can do a billion tests per second, how long would one have to wait on average until a bug gets triggered?</p>
<p><strong>Solution.</strong>  Consider the code above.  If we choose the full range of 32-bit integers for <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">c</span></code>, then the first condition alone, both <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> being zero, has a chance of <span class="math notranslate nohighlight">\(p = 1 / (2^{32} * 2^{32})\)</span>; that is, one in 18.4 quintillions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">combinations</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">32</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">32</span>
<span class="n">combinations</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>18446744073709551616
</pre></div>
</div>
</div>
</div>
<p>If we can do a billion tests per second, how many years would we have to wait?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tests_per_second</span> <span class="o">=</span> <span class="mi">1000000000</span>
<span class="n">seconds_per_year</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mf">365.25</span>
<span class="n">tests_per_year</span> <span class="o">=</span> <span class="n">tests_per_second</span> <span class="o">*</span> <span class="n">seconds_per_year</span>
<span class="n">combinations</span> <span class="o">/</span> <span class="n">tests_per_year</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>584.5420460906264
</pre></div>
</div>
</div>
</div>
<p>We see that on average, we’d have to wait for 584 years.  Clearly, pure random choices are not sufficient as sole testing strategy.</p>
</section>
</section>
<section id="exercise-4-to-infinity-and-beyond">
<h3>Exercise 4: To Infinity and Beyond<a class="headerlink" href="#exercise-4-to-infinity-and-beyond" title="Link to this heading">#</a></h3>
<p>When we say that <code class="docutils literal notranslate"><span class="pre">my_sqrt_fixed(x)</span></code> works for all <em>finite</em> numbers <span class="math notranslate nohighlight">\(x\)</span>: What happens if you set <span class="math notranslate nohighlight">\(x\)</span> to <span class="math notranslate nohighlight">\(\infty\)</span> (infinity)? Try this out!</p>
<p><strong>Solution.</strong> <code class="docutils literal notranslate"><span class="pre">my_sqrt_fixed(</span></code> <span class="math notranslate nohighlight">\(\infty\)</span> <code class="docutils literal notranslate"><span class="pre">)</span></code> times out. This is because dividing <span class="math notranslate nohighlight">\(\infty\)</span> by any finite number (as the Newton-Raphson-method does) again yields <span class="math notranslate nohighlight">\(\infty\)</span>, so we’re stuck in an infinite loop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ExpectError</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExpectTimeout</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infinity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>  <span class="c1"># that&#39;s how to get an infinite number</span>

<span class="k">with</span> <span class="n">ExpectTimeout</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">my_sqrt_fixed</span><span class="p">(</span><span class="n">infinity</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/3033877499.py&quot;, line 4, in &lt;module&gt;
    y = my_sqrt_fixed(infinity)
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/3001478627.py&quot;, line 5, in my_sqrt_fixed
    return my_sqrt(x)
  File &quot;/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_62675/2661069967.py&quot;, line 5, in my_sqrt
    while approx != guess:
          ^^^^^^^^^^^^^^^
  File &quot;Timeout.ipynb&quot;, line 43, in timeout_handler
    raise TimeoutError()
TimeoutError (expected)
</pre></div>
</div>
</div>
</div>
<p>Lesson learned: If you test a program with numbers, always be sure to include extreme values.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Tours.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Sitemap</p>
      </div>
    </a>
    <a class="right-next"
       href="Fuzzer.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Fuzzing: Breaking Things with Random Inputs</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-testing">Simple Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-python-programs">Understanding Python Programs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-function">Running a Function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-notebooks">Interacting with Notebooks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-a-function">Debugging a Function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checking-a-function">Checking a Function</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#automating-test-execution">Automating Test Execution</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-tests">Generating Tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-time-verification">Run-Time Verification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-input-vs-function-input">System Input vs Function Input</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-limits-of-testing">The Limits of Testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lessons-learned">Lessons Learned</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next Steps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#background">Background</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-get-acquainted-with-notebooks-and-python">Exercise 1: Get Acquainted with Notebooks and Python</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#beginner-level-run-notebooks-in-your-browser">Beginner Level: Run Notebooks in Your Browser</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-level-run-python-code-on-your-machine">Advanced Level: Run Python Code on Your Machine</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pro-level-run-notebooks-on-your-machine">Pro Level: Run Notebooks on Your Machine</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#boss-level-contribute">Boss Level: Contribute!</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-testing-shellsort">Exercise 2: Testing Shellsort</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-manual-test-cases">Part 1: Manual Test Cases</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-random-inputs">Part 2: Random Inputs</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-quadratic-solver">Exercise 3: Quadratic Solver</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-find-bug-triggering-inputs">Part 1: Find bug-triggering inputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-fix-the-problem">Part 2: Fix the problem</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#part-3-odds-and-ends">Part 3: Odds and Ends</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-to-infinity-and-beyond">Exercise 4: To Infinity and Beyond</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Andreas Zeller, Rahul Gopinath, Marcel Böhme, Gordon Fraser, and Christian Holler
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
  Copyright &copy; 2021–2025 <a href="https://www.cispa.de/">CISPA Helmholtz Center for Information Security</a>. Copyright &copy; 2018-2020 <a href="https://www.uni-saarland.de/">Saarland University</a>. Copyright &copy; 2018-2025 external contributors.
  The <strong>content</strong> of this project is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
  The <strong>source code</strong> that is part of the content, as well as the source code used to format and display that content is licensed under the <a href="https://github.com/uds-se/fuzzingbook/blob/master/LICENSE.md#mit-license">MIT License</a>.
  <br>
  <a href="https://cispa.de/en/impressum">Imprint</a> &middot; <a href="/html/index.html#how-do-i-cite-your-work">Cite</a>
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>